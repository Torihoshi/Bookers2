<p>books/index</p>
<!-- フラッシュメッセージ表示 -->
<p class="notice"><%= flash[:notice] %></p>

<!--メイン部分-->
<div class="container px-5 px-sm-0">
  <!-- エラーメッセージ -->
  <div class="notice">
    <% if @book_new.errors.any? %>
      <h3><%= @book_new.errors.count %> errors prohibited this obj from being saved:</h3>
      <div class="error-message">
        <ul>
          <% @book_new.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>

  <div class="row">

    <!--左部分-->
    <div class="col-md-3">
      <!--ユーザー表示機能-->
      <h2>User info</h2>
      <%= render 'users/user', user: current_user %>

      <!--新規投稿機能-->
      <h2>New book</h2>
      <%= render 'new', book: @book_new %>
    </div>

    <!--右部分-->
    <div class="col-md-8 offset-md-1">
      <!--投稿一覧-->
      <h2>Books</h2>
      <table class="table table-hover table-inverse">
        <tr>
          <th></th>
          <th>Title</th>
          <th>Opinion</th>
        </tr>

        <% @books.each do |book| %>
          <tr>
            <td>
              <%= link_to user_path(book.user_id) do %>
                <%= image_tag book.user.get_profile_image(80,80) %>
              <% end %>
            </td>
            <td>
              <%= link_to book.title, book_path(book.id) %>
            </td>
            <td>
              <%= book.body %>
            </td>
          </tr>
        <% end %>
      </table>
    </div>

  </div>
</div>